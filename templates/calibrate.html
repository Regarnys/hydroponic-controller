<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Calibrate Pumps</title>
</head>
<body>
<h1>Calibrate Pump</h1>

{% if message %}
<p style="color:blue;">{{ message }}</p>
{% endif %}

<h2>Test Run</h2>
<form method="POST">
  <input type="hidden" name="action" value="test_run">
  <label>Pump:</label>
  <select name="pump_name">
    {% for p in pump_names %}
    <option value="{{ p }}">{{ p }}</option>
    {% endfor %}
  </select>
  <label>Seconds:</label>
  <input type="text" name="test_run_seconds" value="5">
  <button type="submit">Run Pump</button>
</form>

<h2>Save Measurement</h2>
<form method="POST">
  <input type="hidden" name="action" value="save_measurement">
  <label>Pump:</label>
  <select name="pump_name">
    {% for p in pump_names %}
    <option value="{{ p }}">{{ p }}</option>
    {% endfor %}
  </select>
  <label>Seconds (same used above):</label>
  <input type="text" name="test_run_seconds" value="5">
  <label>Measured mL:</label>
  <input type="text" name="measured_ml" value="0">
  <button type="submit">Save Calibration</button>
</form>

<h3>Current Calibration</h3>
<pre>{{ config['pump_calibration']|tojson }}</pre>

<p><a href="{{ url_for('dashboard') }}">Back to Dashboard</a></p>
</body>
</html>
